<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Chat</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <!-- AUTH VIEW -->
    <section id="authView" class="view">
      <div class="auth-card">
        <div class="brand">
          <div class="logo">âš¡</div>
          <div>
            <h1>AI Chat</h1>
            <p>Firebase + GitHub Pages (kurulumsuz)</p>
          </div>
        </div>

        <div class="tabs">
          <button id="tabLogin" class="tab active">GiriÅŸ</button>
          <button id="tabRegister" class="tab">KayÄ±t</button>
        </div>

        <div id="loginForm" class="form">
          <label>E-posta</label>
          <input id="loginEmail" type="email" placeholder="ornek@mail.com" autocomplete="email" />
          <label>Åifre</label>
          <input id="loginPass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
          <button id="btnLogin" class="btn primary">GiriÅŸ Yap</button>
          <button id="btnForgot" class="btn ghost">Åifremi unuttum</button>
          <p class="hint">GiriÅŸten sonra e-posta doÄŸrulamasÄ± zorunlu.</p>
        </div>

        <div id="registerForm" class="form hidden">
          <label>E-posta</label>
          <input id="regEmail" type="email" placeholder="ornek@mail.com" autocomplete="email" />
          <label>Åifre</label>
          <input id="regPass" type="password" placeholder="En az 6 karakter" autocomplete="new-password" />
          <label>Åifre (tekrar)</label>
          <input id="regPass2" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="new-password" />
          <button id="btnRegister" class="btn primary">KayÄ±t Ol</button>
          <p class="hint">KayÄ±t olunca doÄŸrulama maili gider.</p>
        </div>

        <div id="verifyBox" class="verify hidden">
          <h2>âœ… E-postanÄ± doÄŸrula</h2>
          <p>Mail kutuna doÄŸrulama linki gÃ¶nderdim. Linke tÄ±kladÄ±ktan sonra aÅŸaÄŸÄ±dan kontrol et.</p>
          <div class="row">
            <button id="btnResendVerify" class="btn">Tekrar gÃ¶nder</button>
            <button id="btnIverif" class="btn primary">DoÄŸruladÄ±m</button>
          </div>
          <button id="btnLogoutFromVerify" class="btn ghost">Ã‡Ä±kÄ±ÅŸ</button>
        </div>
      </div>
    </section>

    <!-- MAIN APP VIEW -->
    <section id="mainView" class="view hidden">
      <aside class="sidebar">
        <div class="side-top">
          <button id="btnNewChat" class="btn primary full">ï¼‹ Yeni sohbet</button>

          <div class="side-section">
            <div class="side-title">Sohbetler</div>
            <div id="chatList" class="chat-list"></div>
          </div>
        </div>

        <div class="side-bottom">
          <div class="me">
            <div class="avatar" id="meAvatar">ğŸ™‚</div>
            <div class="me-meta">
              <div id="meEmail" class="me-email">â€”</div>
              <div class="me-sub">Firebase Auth</div>
            </div>
          </div>
          <div class="row">
            <button id="btnSettings" class="btn">Ayarlar</button>
            <button id="btnLogout" class="btn ghost">Ã‡Ä±kÄ±ÅŸ</button>
          </div>
        </div>
      </aside>

      <main class="chat">
        <header class="topbar">
          <div class="title">
            <div class="dot"></div>
            <div>
              <div class="h">AI Chat</div>
              <div id="modelLabel" class="sub">Model: â€”</div>
            </div>
          </div>
          <div class="actions">
            <button id="btnStop" class="btn danger hidden">Durdur</button>
          </div>
        </header>

        <div id="messages" class="messages"></div>

        <footer class="composer">
          <textarea id="input" rows="1" placeholder="Mesaj yaz... (Enter gÃ¶nder, Shift+Enter yeni satÄ±r)"></textarea>
          <button id="btnSend" class="btn primary send">GÃ¶nder</button>
        </footer>
      </main>
    </section>

    <!-- SETTINGS MODAL -->
    <div id="modalBackdrop" class="backdrop hidden"></div>
    <div id="settingsModal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-head">
        <h2>Ayarlar</h2>
        <button id="btnCloseSettings" class="btn ghost">âœ•</button>
      </div>

      <div class="modal-body">
        <div class="grid2">
          <div>
            <label>API Key (tarayÄ±cÄ±da saklanÄ±r)</label>
            <input id="apiKey" type="password" placeholder="sk-..." />
            <p class="mini">Ä°pucu: Bu site ortak key saklamaz. Her kullanÄ±cÄ± kendi keyâ€™ini girsin.</p>
          </div>
          <div>
            <label>Endpoint (OpenAI uyumlu)</label>
            <input id="apiUrl" type="text" value="https://api.openai.com/v1/chat/completions" />
            <p class="mini">EÄŸer API tarayÄ±cÄ±dan CORSâ€™a izin vermezse proxy gerekir.</p>
          </div>
        </div>

        <div class="grid2">
          <div>
            <label>Model</label>
            <input id="model" type="text" value="gpt-5.2" />
          </div>
          <div>
            <label>Temperature</label>
            <input id="temp" type="number" min="0" max="2" step="0.1" value="0.7" />
          </div>
        </div>

        <label>System Prompt (isteÄŸe baÄŸlÄ±)</label>
        <textarea id="systemPrompt" rows="3" placeholder="Ã–rn: TÃ¼rkÃ§e kÄ±sa cevap ver..."></textarea>

        <div class="modal-actions">
          <button id="btnSaveSettings" class="btn primary">Kaydet</button>
          <button id="btnClearLocal" class="btn">Bu cihazdaki keyâ€™i sil</button>
        </div>
      </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast hidden"></div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>

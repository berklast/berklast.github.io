<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sohbet Uygulaması</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK'ları artık script.js içinden modül olarak yüklenecek,
         bu yüzden buradaki global script etiketlerini kaldırdık. -->
</head>
<body>
    <div class="container">
        <!-- Giriş/Kayıt Alanı -->
        <div id="auth-section" class="auth-section">
            <h2>Giriş Yap / Kayıt Ol</h2>
            <input type="email" id="auth-email" placeholder="E-posta">
            <input type="password" id="auth-password" placeholder="Şifre">
            <button id="register-btn">Kayıt Ol</button>
            <button id="login-btn">Giriş Yap</button>
            <button id="google-login-btn" class="google-btn">Google ile Giriş Yap</button>
            <p id="auth-error" class="error-message"></p>
            <button id="forgot-password-btn">Şifremi Unuttum</button>
            <p><a href="#" id="verify-email-link">E-postamı Doğrula (Link Gönder)</a></p>
        </div>

        <!-- Ana Uygulama Alanı -->
        <div id="app-section" class="app-section hidden">
            <header>
                <div class="user-info">
                    <span id="display-name"></span> (<span id="user-email"></span>)
                </div>
                <div class="header-buttons">
                    <button id="friends-list-btn" class="icon-btn" title="Arkadaş Listesi">👥</button>
                    <button id="settings-btn" class="icon-btn" title="Ayarlar">⚙️</button>
                    <button id="logout-btn" class="icon-btn" title="Çıkış Yap">🚪</button>
                </div>
            </header>

            <!-- Ana Sohbet Alanı -->
            <div id="main-chat-area" class="main-chat-area">
                <h3>Genel Sohbet</h3>
                <div id="messages-container" class="messages-container">
                    <!-- Mesajlar buraya yüklenecek -->
                </div>
                <div class="message-input-area">
                    <input type="text" id="message-input" placeholder="Mesaj yaz...">
                    <button id="send-message-btn">Gönder</button>
                </div>
            </div>

            <!-- Arkadaş Listesi / Özel Sohbet Alanı -->
            <div id="friends-section" class="friends-section hidden">
                <h3>Arkadaş Listesi</h3>
                <div class="add-friend-area">
                    <input type="email" id="add-friend-email" placeholder="Arkadaş E-postası">
                    <button id="add-friend-btn">Arkadaş Ekle</button>
                    <p id="add-friend-status" class="status-message"></p>
                </div>
                <ul id="friends-list">
                    <!-- Arkadaşlar buraya yüklenecek -->
                </ul>
                <button id="back-to-chat-btn">Geri Dön</button>

                <!-- Özel Sohbet Penceresi -->
                <div id="private-chat-modal" class="modal hidden">
                    <div class="modal-content">
                        <span class="close-button" id="close-private-chat">&times;</span>
                        <h4 id="private-chat-title"></h4>
                        <div id="private-messages-container" class="messages-container"></div>
                        <div class="message-input-area">
                            <input type="text" id="private-message-input" placeholder="Özel mesaj yaz...">
                            <button id="send-private-message-btn">Gönder</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ayarlar Alanı -->
            <div id="settings-section" class="settings-section hidden">
                <h3>Ayarlar</h3>
                <div class="setting-item">
                    <h4>İsim Değiştir</h4>
                    <input type="text" id="new-display-name" placeholder="Yeni İsim">
                    <button id="update-display-name-btn">Güncelle</button>
                    <p id="display-name-status" class="status-message"></p>
                </div>
                <div class="setting-item">
                    <h4>E-posta Değiştir</h4>
                    <input type="email" id="new-email" placeholder="Yeni E-posta">
                    <button id="update-email-btn">Güncelle</button>
                    <p id="email-status" class="status-message"></p>
                    <p class="small-text">Değişiklik için mevcut e-postanıza onay kodu gidecektir.</p>
                </div>
                <div class="setting-item">
                    <h4>Şifre Değiştir</h4>
                    <input type="password" id="current-password" placeholder="Mevcut Şifre">
                    <input type="password" id="new-password" placeholder="Yeni Şifre">
                    <button id="update-password-btn">Güncelle</button>
                    <p id="password-status" class="status-message"></p>
                    <p class="small-text">Şifre değişikliği sonrası tekrar giriş yapmanız gerekebilir.</p>
                </div>
                <button id="back-from-settings-btn">Geri Dön</button>
            </div>
        </div>
    </div>

    <!-- Kendi JavaScript dosyamız -->
    <script type="module" src="script.js"></script>
</body>
</html>
